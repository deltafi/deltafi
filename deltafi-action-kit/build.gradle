plugins {
    id 'io.quarkus'
    id 'org.kordamp.gradle.jandex' version '0.11.0'
    id "com.github.hierynomus.license" version "${hierynomusLicenseVersion}"
}

description = 'DeltaFi Action Kit - Action implementation SDK for DeltaFi actions'

apply plugin: 'maven-publish'

license {
    header(rootProject.file('HEADER'))
    excludes(excludeFromLicense)
}

dependencies {
    implementation enforcedPlatform("${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}")

    implementation(platform("com.netflix.graphql.dgs:graphql-dgs-platform-dependencies:${dgsVersion}")) {
        because 'DGS BOM to automatically define versions of other packages below'
    }

    implementation project(':deltafi-common')

    implementation "redis.clients:jedis:${jedisVersion}"

    implementation "io.minio:minio:${minioVersion}"

    implementation 'io.quarkus:quarkus-config-yaml'
    implementation 'io.quarkus:quarkus-resteasy-reactive'
    implementation 'io.quarkus:quarkus-resteasy-reactive-jackson'
    implementation 'io.quarkus:quarkus-spring-cloud-config-client'
    implementation 'io.quarkus:quarkus-spring-boot-properties'
    implementation 'io.quarkus:quarkus-hibernate-validator'
    implementation "io.quarkiverse.loggingjson:quarkus-logging-json:${quarkusLoggingJsonVersion}"
    implementation "io.quarkiverse.micrometer.registry:quarkus-micrometer-registry-graphite:${quarkusMicrometerRegistryGraphiteVersion}"

    implementation 'com.netflix.graphql.dgs:graphql-dgs-client'
    implementation "com.netflix.graphql.dgs.codegen:graphql-dgs-codegen-client-core:${dgsCodegenVersion}"

    implementation "com.graphql-java:graphql-java:${graphqlJavaVersion}"
    implementation 'com.fasterxml.jackson.module:jackson-module-kotlin'
    implementation "com.github.victools:jsonschema-generator:${jsonschemaGeneratorVersion}"
    implementation "com.github.victools:jsonschema-module-jackson:${jsonschemaGeneratorVersion}"

    testImplementation 'io.quarkus:quarkus-junit5'
    testImplementation 'io.quarkus:quarkus-junit5-mockito'
    testImplementation 'io.rest-assured:rest-assured'
    testImplementation 'org.mockito:mockito-junit-jupiter'
    testImplementation 'org.mockito:mockito-inline'
    implementation 'org.mock-server:mockserver-netty:5.13.2'
    implementation 'org.mock-server:mockserver-junit-jupiter:5.13.2'
}
