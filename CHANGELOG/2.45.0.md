## [2.45.0] - 2025-12-19

### Added
- Unified flow output dialog with three tabs: Metadata (default), Input Content, and Output Content
- Metadata diff view showing added/removed/modified entries
- Different icons in flow table and graph to indicate content/metadata changes: file icon (unchanged) vs file-pen icon (modified)
- Added an endpoint, `api/v2/deltafile/export/{did}`, that exports the DeltaFile as a tar file. The archive includes a `<did>.json` file which holds the DeltaFile metadata and content directory which holds all the referenced content.
- Added an endpoint, `api/v2/deltafile/import`, that accepts tar files. Each DeltaFile JSON file is mapped to an entity which is inserted into the database. Each content file is loaded into the content storage system.
- Added an endpoint, `api/v2/deltafile/export/errors`, that exports a batch of errored DeltaFiles and optionally marks each one that is exported as acknowledged. The endpoint acknowledges by default, to disable use the `acknowledge` query param with a value of false. By default, up to 100 DeltaFiles will be exported, to adjust the amount use the `limit` query param with the desired max value.
- Added an `Export DeltaFile` option to the DeltaFile Viewer menu
- Added new permissions, `DeltaFileExport` and `DeltaFileImport`, to control access to the new export and import feature
- Added commands for importing and exporting DeltaFiles
   ```bash
   deltafi deltafile export <did>
   deltafi deltafile import <did>.tar
   deltafi errored export
   ```
- HTTP proxy support for HTTP egress actions (`HttpEgress`, `FlowfileEgress`). Configure via `proxyUrl` parameter (e.g., `http://proxy.example.com:8080`). Optional authenticated proxy support via `proxyUsername` and `proxyPassword` (EnvVar) parameters.
- Base64Encode action: encodes content using Base64 (standard or URL-safe)
- Base64Decode action: decodes Base64-encoded content
- ReplaceText action: replaces text using literal or regex matching
- HashContent action: computes cryptographic hashes (MD5, SHA-1, SHA-256, SHA-384, SHA-512) and stores in metadata
- Provenance tracking for DeltaFile lineage export. When enabled, creates Parquet files recording the journey of each file through the system (data source, transforms, data sink, final state, timestamps, annotations). Designed for environments with dynamic scaling and ephemeral instances.
- New system properties: `provenanceEnabled`, `provenanceAgeOffDays`, `provenanceAnnotationsAllowed`
- New `/provenance` endpoint in deltafi-analytics for receiving provenance records
- Grafana Provenance dashboard with filtering by data source, data sink, filename, and annotation key/value
- Documentation for provenance tracking in `deltafi-docs/docs/advanced/provenance.md`
- Content selector sidebar now displays tags next to filenames
- TUI commands for managing auto resume rules (`deltafi auto-resume` / `deltafi ar`)
  - `list` - List all auto resume rules
  - `get` - Get rule by name or ID
  - `export` - Export all rules as JSON/YAML
  - `load` - Load rules from file(s)
  - `delete` - Delete a rule (with confirmation)
  - `clear` - Delete all rules (with confirmation)
  - `apply` - Apply rules to existing errored DeltaFiles
  - `dry-run` - Test a rule without saving

### Changed
- Changed the `deltafi deltafile` command to require subcommands. The original view functionality is now under `deltafi deltafile view <did>`
- Plugin SNAPSHOT builds now use timestamped tags (e.g., `2.44.1-SNAPSHOT-20251217-143022`) to ensure each build gets a unique image tag
- Plugin gradle builds automatically prune old SNAPSHOT images before building (keeps 3 most recent)
- Made plugin jar builds reproducible by excluding build timestamp and normalizing file order
- Increased maximum zoom level on full system map from 2x to 5x
- System map layout now groups disconnected dataflows into separate visual clusters
- System map uses barycenter ordering to minimize edge crossings instead of alphabetical ordering

### Fixed
- Fixed issue of Plugin page refresh preventing multiple plugin updates when a plugin is still in the progress of updating. 
- Fixed error counting to count distinct DeltaFiles instead of DeltaFileFlows, preventing inflated counts when a DeltaFile has multiple errored flows
- Fixed "By Message" pagination showing incorrect totals (e.g., 43 rows instead of 4 unique messages)
- Fixed bug where output content appeared empty in DeltaFile viewer for flows with no actions
- Fixed issue where `./gradlew install` in plugin projects would not restart the plugin container even when the image changed (now uses unique tags so core naturally detects the change)
- Fixed issue where `./gradlew install` did not respect the overridden docker image name in the Gradle `docker { }` configuration
- Logrotate issue when running as `root` user
- Plugin reconciliation now detects when an installed plugin's running image doesn't match the expected image and redeploys automatically. Fixes issue where rapid back-to-back installs could leave the wrong version running.
- Fixed DeltaFile viewer showing wrong content when viewing tagged content

### Deprecated
- `flow` and `type` fields on `CountPerMessage` GraphQL type (use nested `flows` field instead)

### Upgrade and Migration
- Upgrade logrotate to deltafi/logrotate:1.0.0-2

