## [2.15.0] - 2025-04-18

### Added
- [deltafi-core-actions] New Decompress parameter `passThroughUnsupported` allows content to pass through Decompress without an error if a plain text, unsupported, or unknown format is detected. Sets metadata key `decompressPassthrough` to `true` in this circumstance (GitLab-432)
-  [deltafi-core-actions] Decompress action has new optional parameter `maxExtractedBytes` and metadata override key `disableMaxExtractedBytesCheck` to limit the total bytes extracted from an archive before generating an error (GitLab-434)
- Added the plugin image and pull secret to the snapshot
- Added content selection by tags to content-selecting actions.
- Added an interface, `SchemaGeneratorConfigCustomizer`, that plugins can implement to customize the action parameter schema generator as needed 
- Added an ActionOptions argument to Action constructors that is used to generate detailed documentation
- Add an `actionClass` field to the actions stored in DeltaFileFlows

### Changed
- Changed the snaphot restore behavior so it now installs plugins based on the snapshot and uninstalls any plugins that were not in the snapshot
- Changed the exception handling when a failure occurs to save/write content to put the content name in the errorContext instead of the errorCause for better error grouping
- Changed the errorContext generated by ErrorResultException to include the original exception details
- Updated the cache to write cold queued DeltaFiles to disk immediately and remove them from the cache to prevent conflicts when the scheduled cold queue task runs
- Changed the Decompress maxExtractedBytes parameter to a `DataSize` instead of long
- Increase action threads for HttpEgress; put RestPostEgress back to default since it is deprecated

### Fixed
- [orchestration] Fix cluster script to install a plugin using image vs. coordinates (GitLab-456)
- Fixed an issue where syncing the cache to disk could save outdated copies of the DeltaFile, causing unexpected action exceptions
- Fixed an issue where the ActionInput created by the requeue of cold queued DeltaFile was still marked as cold queued preventing it from writing to valkey
- Fixed an issue where the StateMachine was using the action name instead of queue name (action type) to check if the next action should be cold queued
- Fixed an issue where too many DeltaFiles could be moved from cold to warm, exceeding the max queue threshold
- Fixed Merge action docs not displaying in public documentation
- CLI: Pre-upgrade snapshot now correctly checking for the deltafi-core-scheduler pod 
- [deltafi-core-actions] Update the mediaType for the `Format.TAR_Z` to `application/x-compress` to match TIKA
- Save child DeltaFiles before saving the completed parent DeltaFile to avoid an edge case where the completeParents process could update the parent before the children were persisted. 
- Ensure analytic annotation value lookup table entries are unique to prevent race condition where multiple entries would cause lookups to fail and analytics to be disrupted 

### Tech-Debt/Refactor
- Various database optimizations for analytics 
- [deltafi-core-actions] Clean up `Decompress` code to utilize `Format` enum values 

### Upgrade and Migration
- Action descriptions may be replaced with ActionOptions to provide details in generated documentation.

