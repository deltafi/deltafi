{
  "name": "sample",
  "description": "Test Plan",
  "version": "0.17.0",
  "ingressFlowConfigurations": [
    {
      "name": "sample",
      "type": "json",
      "transformActions": [
        "Utf8TransformAction",
        "SampleTransformAction"
      ],
      "loadAction": "SampleLoadAction"
    },
    {
      "name": "theFlow",
      "type": "theType"
    },
    {
      "name": "childFlow",
      "type": "json",
      "transformActions": [
        "SampleTransformAction"
      ],
      "loadAction": "SampleLoadAction"
    }
  ],
  "egressFlowConfigurations": [
    {
      "name": "sample",
      "egressAction": "SampleEgressAction",
      "formatAction": "SampleFormatAction",
      "enrichActions": [
        "SampleEnrichAction"
      ],
      "validateActions": [
        "AuthorityValidateAction",
        "SampleValidateAction"
      ]
    },
    {
      "name": "error",
      "egressAction": "ErrorEgressAction",
      "formatAction": "ErrorFormatAction"
    }
  ],
  "transformActionConfigurations": [
    {
      "name": "Utf8TransformAction",
      "type": "org.deltafi.core.domain.TestAction",
      "consumes": "json",
      "produces": "json-utf8"
    },
    {
      "name": "SampleTransformAction",
      "consumes": "json-utf8",
      "produces": "json-utf8-sample"
    }
  ],
  "loadActionConfigurations": [
    {
      "name": "SampleLoadAction",
      "consumes": "json-utf8-sample"
    }
  ],
  "enrichActionConfigurations": [
    {
      "name": "SampleEnrichAction",
      "requiresDomains": [
        "sample"
      ],
      "requiresMetadataKeyValues": [
        {
          "key": "loadSampleType",
          "value": "load-sample-type"
        }
      ]
    }
  ],
  "formatActionConfigurations": [
    {
      "name": "SampleFormatAction",
      "requiresDomains": [
        "sample"
      ],
      "requiresEnrichment": [
        "sampleEnrichment"
      ]
    },
    {
      "name": "ErrorFormatAction",
      "requiresDomains": [
        "error"
      ]
    }
  ],
  "validateActionConfigurations": [
    {
      "name": "AuthorityValidateAction",
      "type": "org.deltafi.stix.actions.RubberStampValidateAction"
    },
    {
      "name": "SampleValidateAction",
      "type": "org.deltafi.stix.actions.RubberStampValidateAction"
    }
  ],
  "egressActionConfigurations": [
    {
      "name": "Stix2_1EgressAction",
      "type": "org.deltafi.core.action.RestPostEgressAction",
      "parameters": {
        "url": "${EGRESS_ENDPOINT}",
        "metadataKey": "deltafiMetadata"
      }
    },
    {
      "name": "Stix1_XEgressAction",
      "type": "org.deltafi.core.action.RestPostEgressAction",
      "parameters": {
        "url": "${EGRESS_ENDPOINT}",
        "metadataKey": "deltafiMetadata"
      }
    }
  ],
  "variables": [
    {
      "name": "EGRESS_ENDPOINT",
      "description": "The URL to post the DeltaFile to",
      "dataType": "STRING",
      "required": true,
      "defaultValue": "http://deltafi-egress-sink-service"
    }
  ]
}
