#
#    DeltaFi - Data transformation and enrichment platform
#
#    Copyright 2022 DeltaFi Contributors <deltafi@deltafi.org>
#
#    Licensed under the Apache License, Version 2.0 (the "License");
#    you may not use this file except in compliance with the License.
#    You may obtain a copy of the License at
#
#        http://www.apache.org/licenses/LICENSE-2.0
#
#    Unless required by applicable law or agreed to in writing, software
#    distributed under the License is distributed on an "AS IS" BASIS,
#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#    See the License for the specific language governing permissions and
#    limitations under the License.
#

mutation {
    actionEvent(
        event: {
            did: "%1$s"
            action: "Utf8TransformAction"
            start: "2021-07-11T13:44:22.183Z"
            stop: "2021-07-11T13:44:22.184Z"
            type: TRANSFORM
            transform: {
                protocolLayer: {
                    type: "json-utf8"
                    action: "Utf8TransformAction"
                    content: [
                        {
                            name: "file.json"
                            contentReference: {
                                uuid: "utf8ObjectName"
                                offset: 0
                                size: 500
                                did: "%1$s"
                                mediaType: "application/octet-stream"
                            }
                        }
                    ]
                }
            }
        }
    ) {
        did
        stage
        actions {
            name
            state
            errorCause
            errorContext
        }
        created
        modified
    }
}