plugins:
  - groupId: org.deltafi
    artifactId: deltafi-core-actions
  - groupId: org.deltafi.testjig
    artifactId: deltafi-testjig
dataSources:
  - unarchive-passthrough-rest-data-source
transformationFlows:
  - unarchive-passthrough-transform
  - passthrough-transform
egressFlows:
  - passthrough-egress
input:
  flow: unarchive-passthrough-rest-data-source
  ingressFileName: three-files.tar.gz
  base64Encoded: false
  data: "Here is some\ntext on two lines"
  timeout: PT3M
expectedDeltaFile:
  stage: COMPLETE
  childCount: 3
  expectedActions:
    - flow: unarchive-passthrough-transform
      type: TRANSFORM
      actions: [IngressAction, Unarchive, SplitContent]
  children:

    - stage: COMPLETE
      childCount: 0
      parentCount: 1
      expectedActions:
        - flow: passthrough-transform
          type: TRANSFORM
          actions: [Passthrough, PassthroughEgress]

    - stage: COMPLETE
      childCount: 0
      parentCount: 1
      expectedActions:
        - flow: passthrough-transform
          type: TRANSFORM
          actions: [Passthrough, PassthroughEgress]

    - stage: COMPLETE
      childCount: 0
      parentCount: 1
      expectedActions:
        - flow: passthrough-transform
          type: TRANSFORM
          actions: [Passthrough, PassthroughEgress]
      expectedContent:
        flow: passthrough-egress
        type: EGRESS
        action: PassthroughEgress
        data:
          - name: test/c
            value: >
              Cccccccccccc.
